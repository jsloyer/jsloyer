<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="This is a part two post following up on my earlier post on Zero Downtime Deployment with the CF Autopilot Plugin. I highly encourage you to read the first part before reading this post but if you are lazy I will go over the high level concepts here.\nOverview of Part 1 (Quick Refresher) In part 1 we went over what a zero downtime deployment is and why it is in important. Let&rsquo;s briefly cover that again.\n"><title>Zero downtime deployments with Bluemix and Codeship</title><link rel=canonical href=https://www.jeffsloyer.io/post/zero-downtime-deployments-with-bluemix-and-codeship/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="Zero downtime deployments with Bluemix and Codeship"><meta property='og:description' content="This is a part two post following up on my earlier post on Zero Downtime Deployment with the CF Autopilot Plugin. I highly encourage you to read the first part before reading this post but if you are lazy I will go over the high level concepts here.\nOverview of Part 1 (Quick Refresher) In part 1 we went over what a zero downtime deployment is and why it is in important. Let&rsquo;s briefly cover that again.\n"><meta property='og:url' content='https://www.jeffsloyer.io/post/zero-downtime-deployments-with-bluemix-and-codeship/'><meta property='og:site_name' content='Jeff Sloyer'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='bluemix'><meta property='article:tag' content='devops'><meta property='article:published_time' content='2015-07-20T10:54:13-05:00'><meta property='article:modified_time' content='2015-07-20T10:54:13-05:00'><meta property='og:image' content='https://www.jeffsloyer.io/post/zero-downtime-deployments-with-bluemix-and-codeship/unplug.jpg'><meta name=twitter:title content="Zero downtime deployments with Bluemix and Codeship"><meta name=twitter:description content="This is a part two post following up on my earlier post on Zero Downtime Deployment with the CF Autopilot Plugin. I highly encourage you to read the first part before reading this post but if you are lazy I will go over the high level concepts here.\nOverview of Part 1 (Quick Refresher) In part 1 we went over what a zero downtime deployment is and why it is in important. Let&rsquo;s briefly cover that again.\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.jeffsloyer.io/post/zero-downtime-deployments-with-bluemix-and-codeship/unplug.jpg'><link rel="shortcut icon" href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-1SGYYQEYE5"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1SGYYQEYE5")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/airplane_hu_b02b01ef7f6fbee8.png width=300 height=225 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>Jeff Sloyer</a></h1><h2 class=site-description>Thoughts on Tech and other interests...</h2></div></header><ol class=menu-social><li><a href=https://github.com/jsloyer target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/jeffsloyer/ target=_blank title="Linked In" rel=me><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></a></li><li><a href=https://twitter.com/jsloyer target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/speaking/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>Speaking</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#overview-of-part-1-quick-refresher>Overview of Part 1 (Quick Refresher)</a></li><li><a href=#importance-of-zero-down-time-deployments>Importance of Zero Down Time Deployments</a></li><li><a href=#how-does-it-work>How does it work?</a></li><li><a href=#autopilot-plugin>Autopilot plugin</a></li><li><a href=#codeship-setup>Codeship setup</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/zero-downtime-deployments-with-bluemix-and-codeship/><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/unplug_hu_4dd0881486424e0b.jpg srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/unplug_hu_4dd0881486424e0b.jpg 800w, /post/zero-downtime-deployments-with-bluemix-and-codeship/unplug_hu_511b3e34ae8f6b09.jpg 1600w" width=800 height=311 loading=lazy alt="Featured image of post Zero downtime deployments with Bluemix and Codeship"></a></div><div class=article-details><header class=article-category><a href=/categories/tutorial/>Tutorial</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/zero-downtime-deployments-with-bluemix-and-codeship/>Zero downtime deployments with Bluemix and Codeship</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jul 20, 2015</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>7 minute read</time></div></footer></div></header><section class=article-content><p>This is a part two post following up on my earlier post on <a class=link href=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/>Zero Downtime Deployment with the CF Autopilot Plugin</a>. ¬†I highly encourage you to read the first part before reading this post but if you are lazy I will go over the high level concepts here.</p><h2 id=overview-of-part-1-quick-refresher>Overview of Part 1 (Quick Refresher)</h2><p>In <a class=link href=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/>part 1</a> we went over what a zero downtime deployment is and why it is in important. Let&rsquo;s briefly cover that again.</p><p>Zero Down time deployments are basically what they sound like. ¬†You update production without taking downtime. ¬†It‚Äôs not always that simple though. ¬†For the context of this post we are going to be talking about how to do zero down time deployments in Cloud Foundry.</p><p>Basically it‚Äôs a little trick to taking advantage of the way Cloud Foundry runs underneath the covers. ¬†Before we jump into it, there are a couple of caveats that we should discuss first. ¬†To successfully take advantage of zero down time deployments you should have followed the <a class=link href=http://12factor.net/ target=_blank rel=noopener>12 Factor App guidelines</a>. This will ensure that your app is horizontally scalable and can be deployed in a manner that will result in zero down time. ¬†Below are some highlights that you should abide by.</p><ol><li><p>Do not store sessions on disk or in memory. ¬†Store them in some type of shared database or file system. ¬†This could be your favorite database or an in memory database as well.</p></li><li><p>Do not store configuration information in your application or on disk. ¬†You should store your config info for your app in environment variables.</p></li><li><p>This is probably the most important, your application needs to be forward and backwards compatible with your database schema‚Ä¶ ¬†Say what? ¬†Yes, you need to trust your developers to manage the database schema from your code.If you are using a relational database, you will need some kind of framework to do database migrations for you. ¬†It‚Äôs not just that simple with relational databases though‚Ä¶ ¬†If you have a big database migration DO NOT PERORM MIGRATIONS THAT WILL INTERRUPT TRAFFIC! ¬†Perform them slowly over time where migrations do not impact users and traffic. ¬†Yahoo had a major application upgrade and it took them 6 months to do the migration to avoid impacting users and taking an outage. ¬†Remember we do not take outages‚Ä¶ ¬†If you are in NoSQL land, your life is easier. ¬†Just revision your API‚Äôs and educate your developers on forward and backwards data compatibility.</p></li></ol><h2 id=importance-of-zero-down-time-deployments>Importance of Zero Down Time Deployments</h2><p>So why are zero down time deployments so important? The answer is simple, to keep your website/app up so you can make money! Well that might be over-simplified a bit, but basically it all boils down to keeping your app up so you can continue to do what you do best, and hopefully that involves making money. If you look at Facebook, for example, they put code into production weeks and months before a feature is exposed to the public. They extensively test the features on employees first, then slowly enable the features to the rest of the world. This is key, getting features in front of your customers and getting feedback from them. If it works that‚Äôs great, but if it doesn‚Äôt at least you know in a short time frame so you can remove it and pivot to go in a different direction. The current landscape is so fast paced that if you don‚Äôt get a feature out, your competition could beat you.</p><h2 id=how-does-it-work>How does it work?</h2><p>So let‚Äôs walk through what needs to happen to perform zero downtime deployments in Cloud Foundry. ¬†For the use of the walk-through, the application is currently taking traffic on <code>myapp.mybluemix.net</code>.</p><ol><li><p>Deploy your app or use a currently running app.
Currently your¬†application is taking traffic on <code>myapp.mybluemix.net</code>.
<a class=link href=zero-downtime-graphics.001.png><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.001.png width=1024 height=768 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.001_hu_67a6719a618981e5.png 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.001_hu_9cf09c6100caf55a.png 1024w" loading=lazy alt="zero downtime graphics.001 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li><li><p>Deploy the new version of your app to <code>myapp-temp.mybluemix.net</code>.
At this time there is currently two versions of your app running. ¬†<code>myapp.mybluemix.net</code> is still taking production traffic.
The new app <code>myapp-temp.mybluemix.net</code> is separate, it can be pointed to your production API keys and databases at this point.
<a class=link href=zero-downtime-graphics.002.png><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.002.png width=1024 height=768 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.002_hu_eb1fe4ca1db1eba1.png 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.002_hu_f8db8cd111c0f3e7.png 1024w" loading=lazy alt="zero downtime graphics.002 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li><li><p>Perform smoke tests on the new version of the application.
Some people say this step is optional, but to me its not. ¬†This is key to make sure there wasn‚Äôt any weird regressions or merge issues, they CAN happen‚Ä¶</p></li><li><p>Map production traffic to the new version of your app.
At this point the old version of your app and the new version are both taking production traffic.
<a class=link href=zero-downtime-graphics.003.png><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.003.png width=1024 height=768 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.003_hu_63c6b419a410167d.png 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.003_hu_17ea991aa50404ca.png 1024w" loading=lazy alt="zero downtime graphics.003 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li><li><p>Unmap production traffic from the old version of the app. ¬†You can optionally delete the old version as well.
At this point the new version becomes production and ONLY it is taking traffic.
The new version still has two URL‚Äôs though, <code>myapp.mybluemix.net</code> and <code>myapp-temp.mybluemix.net</code>.
<a class=link href=zero-downtime-graphics.004.png><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.004.png width=1024 height=768 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.004_hu_19326b037542fa88.png 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.004_hu_49e08d9f24a6dbc1.png 1024w" loading=lazy alt="zero downtime graphics.004 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li><li><p>Remove the temporary route <code>myapp-temp.mybluemix.net</code> from the new version of your app.
<a class=link href=zero-downtime-graphics.005.png><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.005.png width=1024 height=768 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.005_hu_679aa03b0584be84.png 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/zero-downtime-graphics.005_hu_669e628ff6813144.png 1024w" loading=lazy alt="zero downtime graphics.005 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li></ol><p>While this can be scripted there really isn‚Äôt a need to do that, there is a Cloud Foundry CLI plugin to do this.</p><h2 id=autopilot-plugin>Autopilot plugin</h2><p>Recently the Cloud Foundry CLI started supporting plugins. ¬†This is the holy grail for CF and you can start doing some fun stuff. ¬†In this case, the fun stuff is automating the complex, possibly human error-prone, steps above. ¬†As a dev, if I can automate something and reduce the chance of something going wrong, I am all in. ¬†If you do this, your IT/operations department will love you.</p><p><a class=link href=https://github.com/concourse/autopilot target=_blank rel=noopener>The plugin</a> performs the above steps for you for performing the zero downtime deployment.</p><p>In <a class=link href=http://jeffsloyer.io/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/ target=_blank rel=noopener>part 1</a> we deployed our application manually to Bluemix using the autopilot plugin locally, in this tutorial we are going to use <a class=link href="http://codeship.com/?utm_campaign=jeffsloyer.io" target=_blank rel=noopener>Codeship to automate our continuous delivery pipeline</a> to use the plugin to perform the zero downtime deployments.</p><h2 id=codeship-setup>Codeship setup</h2><p>First make sure you have a <a class=link href="http://bluemix.net/?cm_mmc=Display-JeffSloyer.io-_-BluemixSampleApp-CodeShipAutoPilotPlugin-_-Node-WatsonPersonalityInsights-_-BM-DevAd" target=_blank rel=noopener>Bluemix</a> account, if you do not sign up by clicking <a class=link href="http://bluemix.net/?cm_mmc=Display-JeffSloyer.io-_-BluemixSampleApp-CodeShipAutoPilotPlugin-_-Node-WatsonPersonalityInsights-_-BM-DevAd" target=_blank rel=noopener>Bluemix</a>.</p><p>Secondly¬†make sure you have signed up for a Codeship account, to do this head <a class=link href="https://codeship.com/registrations/new?utm_campaign=jeffsloyer.io" target=_blank rel=noopener>here</a>. ¬†When I signed up, I clicked &ldquo;Sign up with github&rdquo;, make sure you do this so Codeship can authenticate with your Github account.</p><p>Once you are signed in click &ldquo;Setup new Project&rdquo;, it will bring you a screen like below.</p><p><a class=link href=connectscm.png><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/connectscm.png width=826 height=396 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/connectscm_hu_cfd9ce135e9dafea.png 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/connectscm_hu_b7bf29ed74798548.png 1024w" loading=lazy alt=connectscm class=gallery-image data-flex-grow=208 data-flex-basis=500px></a></p><p>Click on the button on the left. ¬† If you signed up with your Github account it will authenticate you with Github, if you haven&rsquo;t you will need to connect your account to Github.</p><p>Once you have done this you will get a screen like below. ¬†Codeship will show you all the projects you have access to.</p><p><a class=link href=choose-repo.png><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/choose-repo.png width=810 height=703 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/choose-repo_hu_cfde52fb54d6180b.png 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/choose-repo_hu_e592db6a68df09bd.png 1024w" loading=lazy alt="choose repo" class=gallery-image data-flex-grow=115 data-flex-basis=276px></a></p><p>Click on the repo you would like to use.</p><p>You will be then brought to a screen that ask you to setup your pipeline.</p><p>First, we need to remove the test pipeline, lets click on &ldquo;Delete&rdquo;. If you had unit tests you could run them here, for example <code>grunt</code>.</p><p><a class=link href=deletepipeline.jpg><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/deletepipeline.jpg width=802 height=685 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/deletepipeline_hu_dc6df5389410d992.jpg 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/deletepipeline_hu_18e65c82043e01d7.jpg 1024w" loading=lazy alt=deletepipeline class=gallery-image data-flex-grow=117 data-flex-basis=280px></a></p><p>Next since this example is a Node.Js project, we want to make sure the node modules are correct, we want to run <code>npm install</code> here. ¬†We need to clear out the initial starter setup commands that have been highlighed below.</p><p><a class=link href=clearsetup.jpg><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/clearsetup.jpg width=802 height=685 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/clearsetup_hu_d73e3efbdf0e6fd3.jpg 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/clearsetup_hu_7a0edd7056413398.jpg 1024w" loading=lazy alt=clearsetup class=gallery-image data-flex-grow=117 data-flex-basis=280px></a></p><p>It should look like the following now.</p><p><a class=link href=npminstall.jpg><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/npminstall.jpg width=793 height=605 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/npminstall_hu_d8041549ea451508.jpg 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/npminstall_hu_8467e1a1d4f287d6.jpg 1024w" loading=lazy alt=npminstall class=gallery-image data-flex-grow=131 data-flex-basis=314px></a></p><p>Note, if you are using a different language you would want to run the appropriate dependency installer here, for example for Java <code>mvn install</code>.</p><p>Lastly, click &ldquo;Save and goto dashboard&rdquo;.</p><p>Click on &ldquo;Project settings&rdquo; in the top right, then click on &ldquo;Environment variables&rdquo;. ¬†You will be brought to a screen like the following.</p><p><a class=link href=envars.jpg><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/envars.jpg width=1089 height=540 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/envars_hu_223735f7a13891c2.jpg 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/envars_hu_b64bcf699cbf758e.jpg 1024w" loading=lazy alt=envars class=gallery-image data-flex-grow=201 data-flex-basis=484px></a></p><p>You need to setup a couple environment variables to make this work.</p><ul><li>CF_API</li><li>CF_SPACE</li><li>CF_ORG</li><li>CF_USERNAME</li><li>CF_PASSWORD</li></ul><p>Below is a screen shot of things setup.</p><p><a class=link href=envarssetup.jpg><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/envarssetup.jpg width=1142 height=614 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/envarssetup_hu_69f6baff99214d30.jpg 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/envarssetup_hu_943725067c387b9e.jpg 1024w" loading=lazy alt=envarssetup class=gallery-image data-flex-grow=185 data-flex-basis=446px></a></p><p>Next, click deployment on the left and type in &ldquo;master&rdquo; without the quotes for the branch name and click &ldquo;Save pipeline settings&rdquo;.</p><p><a class=link href=masterbranch.jpg><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/masterbranch.jpg width=1145 height=440 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/masterbranch_hu_976e160a90e35732.jpg 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/masterbranch_hu_c03a457ed11f0ed5.jpg 1024w" loading=lazy alt=masterbranch class=gallery-image data-flex-grow=260 data-flex-basis=624px></a></p><p>Click &ldquo;Custom Script&rdquo;.</p><p><a class=link href=customscript.jpg><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/customscript.jpg width=1187 height=818 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/customscript_hu_ef55ff617613d555.jpg 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/customscript_hu_b3e5332b4dc4a783.jpg 1024w" loading=lazy alt=customscript class=gallery-image data-flex-grow=145 data-flex-basis=348px></a></p><p>Paste in the following code, replace <code>myapp</code> with the name of your app.
Note: This requires your app to have a <code>manifest.yml</code></p><p>It should look like the following.</p><p><a class=link href=codesnip.jpg><img src=/post/zero-downtime-deployments-with-bluemix-and-codeship/codesnip.jpg width=853 height=665 srcset="/post/zero-downtime-deployments-with-bluemix-and-codeship/codesnip_hu_50fa23c1b8f13287.jpg 480w, /post/zero-downtime-deployments-with-bluemix-and-codeship/codesnip_hu_722fdd912729f58f.jpg 1024w" loading=lazy alt=codesnip class=gallery-image data-flex-grow=128 data-flex-basis=307px></a></p><p>Click &ldquo;Create&rdquo;.</p><p>You are all set. ¬†Next time you do a git push to Github your app will be auto deployed to Bluemix!</p><p>I would love to hear your feedback and any suggestions you have, please reach out to me on Twitter [@jsloyer](<a class=link href=https://twitter.com/jsloyer target=_blank rel=noopener>https://twitter.com/jsloyer</a> target=)</p></section><footer class=article-footer><section class=article-tags><a href=/tags/bluemix/>Bluemix</a>
<a href=/tags/devops/>Devops</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/><div class=article-image><img src=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/unplug.d458273e4f96c48b3eff1f4a94da7f2d_hu_ac78d9488f0d2b5a.jpg width=250 height=150 loading=lazy alt="Featured image of post Zero Downtime Deployment with the CF Autopilot Plugin" data-key=zero-down-time-deploys-with-the-cf-autopilot-plugin/ data-hash="md5-1FgnPk+WxIs+/x9KlNp/LQ=="></div><div class=article-details><h2 class=article-title>Zero Downtime Deployment with the CF Autopilot Plugin</h2></div></a></article><article class=has-image><a href=/post/twitter-personality-comparisons-using-watson/><div class=article-image><img src=/post/twitter-personality-comparisons-using-watson/personality.ef8762e6abde8256ce1c26f46a95a1ab_hu_3995d50b2ab81b67.jpg width=250 height=150 loading=lazy alt="Featured image of post Twitter Personality Comparisons Using Watson" data-key=twitter-personality-comparisons-using-watson/ data-hash="md5-74di5qveglbOHCb0apWhqw=="></div><div class=article-details><h2 class=article-title>Twitter Personality Comparisons Using Watson</h2></div></a></article><article class=has-image><a href=/post/ibm-container-service-cabin/><div class=article-image><img src=/post/ibm-container-service-cabin/cabin.f03eadbb8fefde41e02513c1a4720b02_hu_4957279fd000ac7f.jpg width=250 height=150 loading=lazy alt="Featured image of post Using Cabin with the IBM Bluemix Container Service" data-key=ibm-container-service-cabin/ data-hash="md5-8D6tu4/v3kHgJRPBpHILAg=="></div><div class=article-details><h2 class=article-title>Using Cabin with the IBM Bluemix Container Service</h2></div></a></article><article class=has-image><a href=/post/peering-inside-a-criminals-mind-using-ibm-watson/><div class=article-image><img src=/post/peering-inside-a-criminals-mind-using-ibm-watson/glasses.27d239de06198fae9a949f59a6820f1c_hu_6136c73f1583bc6d.jpg width=250 height=150 loading=lazy alt="Featured image of post Peering Inside a Criminal‚Äôs Mind using IBM Watson" data-key=peering-inside-a-criminals-mind-using-ibm-watson/ data-hash="md5-J9I53gYZj66alJ9ZpoIPHA=="></div><div class=article-details><h2 class=article-title>Peering Inside a Criminal‚Äôs Mind using IBM Watson</h2></div></a></article><article class=has-image><a href=/post/deploying-your-meteor-app-to-cloud-foundry-and-bluemix/><div class=article-image><img src=/post/deploying-your-meteor-app-to-cloud-foundry-and-bluemix/meteor.34fdd9fe4ffd23fa6e7a556bb707f229_hu_4d3fef20a3c842ea.jpg width=250 height=150 loading=lazy alt="Featured image of post Deploying your Meteor app to Cloud Foundry and Bluemix" data-key=deploying-your-meteor-app-to-cloud-foundry-and-bluemix/ data-hash="md5-NP3Z/k/9I/puelVrtwfyKQ=="></div><div class=article-details><h2 class=article-title>Deploying your Meteor app to Cloud Foundry and Bluemix</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//jeffsloyerio.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 Jeff Sloyer</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>