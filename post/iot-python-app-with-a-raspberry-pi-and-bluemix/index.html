<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="This is an extension/continuation from the blog post on how to create a basic Python webapp. In this tutorial we are going to go through how to integrate a Python Flask webapp in Bluemix with the Internet of Things Foundation in Bluemix with a Raspberry Pi and two sensors on the Raspberry Pi. The tutorial also uses Twilio to interact with the Raspberry Pi.\nSo what does this look like? Here is a simple architecture diagram.\n"><title>IoT Python app with a Raspberry Pi and Bluemix</title><link rel=canonical href=https://www.jeffsloyer.io/post/iot-python-app-with-a-raspberry-pi-and-bluemix/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="IoT Python app with a Raspberry Pi and Bluemix"><meta property='og:description' content="This is an extension/continuation from the blog post on how to create a basic Python webapp. In this tutorial we are going to go through how to integrate a Python Flask webapp in Bluemix with the Internet of Things Foundation in Bluemix with a Raspberry Pi and two sensors on the Raspberry Pi. The tutorial also uses Twilio to interact with the Raspberry Pi.\nSo what does this look like? Here is a simple architecture diagram.\n"><meta property='og:url' content='https://www.jeffsloyer.io/post/iot-python-app-with-a-raspberry-pi-and-bluemix/'><meta property='og:site_name' content='Jeff Sloyer'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='bluemix'><meta property='article:tag' content='flask'><meta property='article:tag' content='iot'><meta property='article:tag' content='python'><meta property='article:tag' content='raspberry pi'><meta property='article:published_time' content='2015-04-02T10:29:53-05:00'><meta property='article:modified_time' content='2015-04-02T10:29:53-05:00'><meta property='og:image' content='https://www.jeffsloyer.io/post/iot-python-app-with-a-raspberry-pi-and-bluemix/iot-pi.jpg'><meta name=twitter:title content="IoT Python app with a Raspberry Pi and Bluemix"><meta name=twitter:description content="This is an extension/continuation from the blog post on how to create a basic Python webapp. In this tutorial we are going to go through how to integrate a Python Flask webapp in Bluemix with the Internet of Things Foundation in Bluemix with a Raspberry Pi and two sensors on the Raspberry Pi. The tutorial also uses Twilio to interact with the Raspberry Pi.\nSo what does this look like? Here is a simple architecture diagram.\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.jeffsloyer.io/post/iot-python-app-with-a-raspberry-pi-and-bluemix/iot-pi.jpg'><link rel="shortcut icon" href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-1SGYYQEYE5"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1SGYYQEYE5")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/airplane_hu_b02b01ef7f6fbee8.png width=300 height=225 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Jeff Sloyer</a></h1><h2 class=site-description>Thoughts on Tech and other interests...</h2></div></header><ol class=menu-social><li><a href=https://github.com/jsloyer target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/jeffsloyer/ target=_blank title="Linked In" rel=me><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></a></li><li><a href=https://twitter.com/jsloyer target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/speaking/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>Speaking</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#setup>Setup</a></li><li><a href=#raspberry-pi-setup-steps>Raspberry Pi Setup Steps</a></li><li><a href=#bluemix-app-setup-steps>Bluemix App Setup Steps</a><ol><li><ol><li></li></ol></li></ol></li><li><a href=#feedback>Feedback</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/><img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/iot-pi_hu_e44e5745bcf130e4.jpg srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/iot-pi_hu_e44e5745bcf130e4.jpg 800w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/iot-pi_hu_49eea5fa4ab135b.jpg 1600w" width=800 height=553 loading=lazy alt="Featured image of post IoT Python app with a Raspberry Pi and Bluemix"></a></div><div class=article-details><header class=article-category><a href=/categories/sample-code/>Sample Code
</a><a href=/categories/tutorial/>Tutorial
</a><a href=/categories/video/>Video</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/>IoT Python app with a Raspberry Pi and Bluemix</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Apr 02, 2015</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>9 minute read</time></div></footer></div></header><section class=article-content><p>This is an extension/continuation from the blog post on how to create a <a class=link href=/post/simple-hello-world-python-app-using-flask/>basic Python webapp</a>. Â In this tutorial we are going to go through how to integrate a Python Flask webapp in Bluemix with the <a class=link href=https://internetofthings.ibmcloud.com/ target=_blank rel=noopener>Internet of Things Foundation</a> in Bluemix with a Raspberry Pi and two sensors on the Raspberry Pi. Â The tutorial also uses Twilio to interact with the Raspberry Pi.</p><p>So what does this look like? Â Here is a simple architecture diagram.</p><p><img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/raspberrypidiagram.png width=1733 height=1135 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/raspberrypidiagram_hu_b8d126391b66e46f.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/raspberrypidiagram_hu_7ea4d030be7309b.png 1024w" loading=lazy alt="raspberrypidiagram IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=152 data-flex-basis=366px></p><p>In the above diagram there is two flows:</p><ul><li><p>The first flow involves pressing a HTML button in the Python Flask app in Bluemix to either turn on or off an LED on the Raspberry Pi.</p></li><li><p>The second flow involves pressing a physical button on the breadboard on the Raspberry Pi and using the IoT service in Bluemix and our app in Bluemix it will send a text message of our choosing to a phone number we enter in the Python Flask app in Bluemix using Twilio.</p></li></ul><p>This all took only about 100 lines of code, pretty cool huh?</p><p>If you prefer to watch a video of this instead of going through the written steps in this tutorial, check out the video below.</p><h2 id=setup>Setup</h2><p>There is two parts to setting this up. Â If we take a look at the architecture diagram above we see that there is a Raspberry Pi piece and then a Bluemix piece. Â We are going to go through the Raspberry PiÂ piece first then we will go through the Bluemix piece.</p><h2 id=raspberry-pi-setup-steps>Raspberry Pi Setup Steps</h2><ol><li><p>Sign up for a Bluemix account, visit <a class=link href="http://bluemix.net/?cm_mmc=developerWorks-_-dWdevcenter-_-bluemix-_-lp" target=_blank rel=noopener>http://bluemix.net</a> in your web browser and click â€œSign-upâ€ in the top right. Â We require a couple bits of information</p></li><li><p>Wait for an email to arrive, it should only take a couple minutes. Â There should be a link in the email that says â€œClick here to complete your registrationâ€, click that. Â Sign in with the username and password you created from step 1.</p></li><li><p>Obtain a Raspberry Pi, a bread board, wires, a LED, and a button Â (your best bet is getting a starter kit such as the <a class=link href=http://amzn.to/2C63713 target=_blank rel=noopener>Canakit</a>)</p></li><li><p>Place an LED in the breadboard (place the shorter side to the left)<img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/led.png width=2554 height=1306 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/led_hu_749bc4504e3b5cc6.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/led_hu_4471df89387d8785.png 1024w" loading=lazy alt="led IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=195 data-flex-basis=469px></p></li><li><p>Place a 220 ohm resistor in the breadboard connecting the short side (the left side of the LED) to the ground rail (the rail with the â€“ sign). Â Make sure to place the side of the resistor with the red stripes closest to the LED_NOTE:_ The way the breadboard works is connections run vertically not horizontally<img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/resistor.png width=2560 height=1290 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/resistor_hu_120786989cc9512e.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/resistor_hu_24cd22be088cca61.png 1024w" loading=lazy alt="resistor IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=198 data-flex-basis=476px></p></li><li><p>Connect a wire from the ground rail to the GND on the pinout board<img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/ground.png width=2550 height=1249 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/ground_hu_79ad35a9de1a948.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/ground_hu_96202a92d48757b1.png 1024w" loading=lazy alt="ground IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=204 data-flex-basis=489px></p></li><li><p>On the right side of the LED, connect a wire to the the port labeled 17.<strong>NOTE:</strong> The way the breadboard works is connections run vertically not horizontally.<img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/gpio17.png width=2555 height=1297 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/gpio17_hu_dc3ca2a2afad3c5e.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/gpio17_hu_a296772ce5d30e4c.png 1024w" loading=lazy alt="gpio17 IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=196 data-flex-basis=472px></p></li><li><p>Place the button in the breadboard, it takes a bit of force to press it in all the way. Â It wonâ€™t break it.<img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/button.png width=2551 height=1309 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/button_hu_a5fd50e46fdcb725.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/button_hu_7ec726de74ff3cce.png 1024w" loading=lazy alt="button IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=194 data-flex-basis=467px></p></li><li><p>Connect a wire from the right side of the button to the ground rail.<img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/buttonground.png width=2571 height=1308 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/buttonground_hu_af4c512b0d95dbf3.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/buttonground_hu_f859855800145f1b.png 1024w" loading=lazy alt="buttonground IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=196 data-flex-basis=471px></p></li><li><p>Connect a wire from the ground rail to a GND port, it doesnâ€™t matter which one it is<img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/buttongroundrail.png width=2036 height=1438 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/buttongroundrail_hu_7b138b6945318671.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/buttongroundrail_hu_ec70a82753480480.png 1024w" loading=lazy alt="buttongroundrail IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=141 data-flex-basis=339px></p></li><li><p>Lastly, connect a wire from the left side of the button to GPIO port 18.<img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/gpio18.png width=2036 height=1438 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/gpio18_hu_7b138b6945318671.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/gpio18_hu_ec70a82753480480.png 1024w" loading=lazy alt="gpio18 IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=141 data-flex-basis=339px></p></li><li><p>Next we need to either use the console for our Raspberry Pi and the terminal application on the device itself or use SSH. Â I am going to use SSH.</p></li><li><p>To get the IP address of your Raspberry Pi the easiest thing is to open up the terminal app on the Raspberry Pi, it is under accessories -> Terminal</p></li><li><p>Type <code>ifconfig</code>.. Â If you are connected over Ethernet the IP address will be under eth0, if you are connected over wifi, the IP address will be under wlan0</p></li><li><p>Next we need to ssh into the device.â€”Windows, download Putty and use that to connect to the IP addressâ€”Mac and Linux, open the Terminal app, type <code>ssh pi@myipaddress</code> where myipaddress is the IP address of the Raspberry Pi, ex. <code>192.168.1.65</code></p></li><li><p>The password is raspberrypi</p></li><li><p>We need to run some commands to update our Raspberry Pi, run the following. Â It will ask you to confirm with the â€œYâ€ key</p><p>sudo apt-get update
sudo-apt-get upgrade</p></li><li><p>Next we need to install a helper library for using GPIO</p><p>git clone git://git.drogon.net/wiringPi
cd wiringPi
./build</p></li><li><p>Next we needÂ to install the IoT library on the Raspberry Pi</p><p>curl -LO <a class=link href=https://github.com/ibm-messaging/iot-raspberrypi/releases/download/1.0.2/iot_1.0-1_armhf.deb target=_blank rel=noopener>https://github.com/ibm-messaging/iot-raspberrypi/releases/download/1.0.2/iot_1.0-1_armhf.deb</a>
sudo dpkg -i iot_1.0-1_armf.deb</p></li><li><p>We need to get the device ID of our raspberry Pi do this run the following and save the output</p><p>service iot getdeviceid
#example output
The device id is b827eba5b236</p></li></ol><pre><code>We will want to copy the id `b827eba5b236`, yours obviously will be different
</code></pre><ol start=21><li><p>Open up a web browser and goto <a class=link href=http://bluemix.net/ target=_blank rel=noopener>bluemix.net</a>, and click on â€œCatalogâ€ in the top. Â Scroll down to the very bottom andÂ click â€œInternet of Thingsâ€.</p></li><li><p>Give the service a name, use iot-python (you must do this exactly or later things wonâ€™t work), for App choose â€œLeave unboundâ€, click â€œCreateâ€.</p></li><li><p>On the left of the next page click â€œLaunch dashboardâ€.</p></li><li><p>At the top click on â€œDevicesâ€.</p></li><li><p>Click â€œAdd Deviceâ€.</p></li><li><p>For the second field (it says e.g. mydevice type) type in exactly <code>raspberrypi</code> (you need to have it spelled like this or there will be issues). Â For device ID paste in the device ID we got from step 20, mine is <code>b827ba5b236</code>. Â Click continue.</p></li><li><p>On the next page it will show something like below, copy this and switch back to terminal on your Raspberry Pi.</p><p>org=pwftki
type=raspberrypi
id=000000000000
auth-method=token
auth-token=cXQaGx8o!a9HwxM-ka</p></li><li><p>Choose your favorite text editor but I am going to use vi. Â Type the following to open the file we want to edit.</p><p>sudo vi /etc/iotsample-raspberrypi/device.cfg</p></li><li><p>To paste the text press the â€œiâ€ key. Â Then paste the text, this will depend on the OS you are on.</p></li><li><p>To save the file hit the â€œEscâ€ key. Â Then Type â€œ:wqâ€ and then press â€œEnterâ€. Â That will save the file.</p></li><li><p>Letâ€™s restart the IoT service on our Raspberry Pi to start sending the data to the IoT service</p><p>sudo service iot restart</p></li><li><p>Next we need to download the Python code to run on the Raspberry Pi, run the following:</p><p>cd ~
git clone <a class=link href=https://github.com/IBM-Bluemix/python-iot-raspberry-pi.git target=_blank rel=noopener>https://github.com/IBM-Bluemix/python-iot-raspberry-pi.git</a>
cd python-iot-raspberry-pi</p></li><li><p>Now we need to install the package manager for Python:</p><p>sudo apt-get install python-pip
sudo pip install -r requirements.txt</p></li><li><p>One last bit, we need a config file for our app before we can start it. Â Lets run the following:</p><p>vi ~/device.cfg</p></li><li><p>Remember this is vi again, so remember the shortcuts for inserting text and saving it from step 29,30. Â The contents of the file should look something like below, replacing yourapikey, yourdeviceid, youriotorg, and yourapitoken with the correct values. To generate the API key and token we can get them from going back to the web browser and going to the Internet of Things Foundation. Â At the top Â click on API Keys. Â Click â€œNew API Keyâ€. Â The values that it gives you will be the values you use for the yourapitoken and yourapikey. <code>yourdeviceid</code> is the value we got from step 20 <code>youriotorg</code> is from step 27, it is also in your config file; in my case my value is pwftki. Letâ€™s save the file (remember, â€œEscâ€, â€œ:wqâ€, â€œEnterâ€)</p><p>[application]
org=youriotorg
id=yourdeviceid
auth-method=apikey
auth-key=yourapikey
auth-token=yourauthtoken</p></li><li><p>OK, so now we can launch/start the app on the Raspberry Pi. Â To do that run the following:</p><p>cd ~/python-iot-raspberry-pi
sudo python client.py</p></li></ol><h2 id=bluemix-app-setup-steps>Bluemix App Setup Steps</h2><h6 id=note--the-following-steps-are-to-be-run-on-your-desktop-not-the-raspberry-pi>NOTE: The following steps are to be run on your desktop NOT the Raspberry Pi.</h6><ol><li><p>We will need to install the Cloud Foundry CLI to deploy our app to Bluemix. Â To do this head over toÂ <a class=link href=https://github.com/cloudfoundry/cli/releases target=_blank rel=noopener>https://github.com/cloudfoundry/cli/releases</a>. Â Choose the appropriate installer for your platform, download it and run the installer.</p></li><li><p>So letâ€™s open up a new terminal Window, we will need to do the rest on our development machine/laptop.</p></li><li><p>We need to download the Python code for our app. Â Run the following. Â If you donâ€™t have git installed follow these instructions <a class=link href=http://git-scm.com/book/en/v2/Getting-Started-Installing-Git target=_blank rel=noopener>here</a>.</p><p>git clone <a class=link href=https://github.com/IBM-Bluemix/python-iot-raspberry-pi.git target=_blank rel=noopener>https://github.com/IBM-Bluemix/python-iot-raspberry-pi.git</a>
cd python-iot-raspberry-pi</p></li><li><p>In your web browser go back to the tab that you have Bluemix open with. Â In the top click â€œCatalogâ€, scroll down to find â€œTwilioâ€. Â Click on that.</p></li><li><p>If you already have a Twilio account and want to use that skip to step 6. Â If you donâ€™t have a Twilio account on the right hand side click â€œRegister at Twilioâ€.</p></li><li><p>Twilio will ask you for some information and you will need to verify your phone number. Â This is important as only numbers verified with the free plan will work with your app. Â  If you want to be able to text any number you need to pay for Twilio, its $1/month/phone number.</p></li><li><p>Once you are signed up for your account, head toÂ <a class=link href=https://www.twilio.com/user/account/voice-messaging target=_blank rel=noopener>https://www.twilio.com/user/account/voice-messaging</a>. Â Near the top right there will be a twistie that says â€œShow API Credentialsâ€, click that. Â There is two pieces of information here, the Account SID and AuthÂ Token. Â We will need to copy these back to the Bluemix tab we have open with Twilio.</p></li><li><p>Paste your Account SID in the field in Bluemix that says Account SID, paste yourÂ Auth Token in the Auth Token field.</p></li><li><p>For the Service name you must type in this exactly iot-twilio</p></li><li><p>For the App, choose â€œLeave Unboundâ€</p></li><li><p>Click Create.</p></li><li><p>Switch back to the terminal that you have on your local dev machine, not your Raspberry Pi.</p></li><li><p>We need to login to Bluemix, to do that, typeÂ <code>cf login -a https://api.ng.bluemix.net</code>. It will ask you for your username and password. This is from step 1 in the Raspberry Pi section above.</p></li><li><p>To deploy our application all we need to do now is type <code>cf push myappname</code> where myapp name is a unique name you choose for your app.<em>NOTE:</em> If you get an error mentioning a route is taken, choose a different name and run <code>cf push</code> with a new app name.</p></li><li><p>It will take about a minute or two to deploy your application but eventually you will get some output that looks like the following:</p><p>requested state: started
instances: 1/1
usage: 1G x 1 instances
urls: testapp-jbs.mybluemix.net
last uploaded: Fri Jul 31 00:25:17 UTC 2015
stack: lucid64
buildpack: SDK for Node.js(TM) (ibm-node.js-0.12.7)</p></li></ol><p>There is a row that says <code>urls:</code>, copy that URL and paste it into your browser.</p><p>If everything went well you should have a page that looks like the following:</p><p><img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/pythoniotapp.png width=671 height=192 srcset="/post/iot-python-app-with-a-raspberry-pi-and-bluemix/pythoniotapp_hu_4e9b23f804cbe845.png 480w, /post/iot-python-app-with-a-raspberry-pi-and-bluemix/pythoniotapp_hu_2167463e78183380.png 1024w" loading=lazy alt="pythoniotapp IoT Python app with a Raspberry Pi and Bluemix" class=gallery-image data-flex-grow=349 data-flex-basis=838px></p><p>An important note here, do not press the button on the Raspberry Pi until you enter a phone number and text message here, if you do the app will crash. Â If you do this you can restart you app with <code>cf restart myappname</code>, where myappname is the name of the app you chose above.</p><p>When you click the â€œOnâ€ button it should turn the light on for you. Â If you press the â€œOffâ€ button it should turn the light off.</p><h2 id=feedback>Feedback</h2><p>Follow us on Twitter at <a class=link href=https://twitter.com/IBMBluemix target=_blank rel=noopener>@IBMBluemix</a> and follow the author of this blog post (Jeff Sloyer, one of our developer advocates) at <a class=link href=https://twitter.com/jsloyer target=_blank rel=noopener>@jsloyer</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/bluemix/>Bluemix</a>
<a href=/tags/flask/>Flask</a>
<a href=/tags/iot/>Iot</a>
<a href=/tags/python/>Python</a>
<a href=/tags/raspberry-pi/>Raspberry Pi</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/simple-hello-world-python-app-using-flask/><div class=article-image><img src=/post/simple-hello-world-python-app-using-flask/helloworld.5adede0999e4f3f6fc03eefcd882b848_hu_de0b7aa9d7f94b3c.png width=250 height=150 loading=lazy alt="Featured image of post Simple Hello World Python App using Flask" data-key=simple-hello-world-python-app-using-flask/ data-hash="md5-Wt7eCZnk8/b8A+782IK4SA=="></div><div class=article-details><h2 class=article-title>Simple Hello World Python App using Flask</h2></div></a></article><article class=has-image><a href=/post/control-home-devices-with-bluemix-internet-of-things/><div class=article-image><img src=/post/control-home-devices-with-bluemix-internet-of-things/robots-blog-post-header1.4ed429e6ecd463ab7c1e1bceeda4646e_hu_d6470bfc8f84ab3e.jpg width=250 height=150 loading=lazy alt="Featured image of post Control home devices with Bluemix Internet of Things" data-key=control-home-devices-with-bluemix-internet-of-things/ data-hash="md5-TtQp5uzUY6t8HhvO7aRkbg=="></div><div class=article-details><h2 class=article-title>Control home devices with Bluemix Internet of Things</h2></div></a></article><article class=has-image><a href=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/><div class=article-image><img src=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/unplug.d458273e4f96c48b3eff1f4a94da7f2d_hu_ac78d9488f0d2b5a.jpg width=250 height=150 loading=lazy alt="Featured image of post Zero Downtime Deployment with the CF Autopilot Plugin" data-key=zero-down-time-deploys-with-the-cf-autopilot-plugin/ data-hash="md5-1FgnPk+WxIs+/x9KlNp/LQ=="></div><div class=article-details><h2 class=article-title>Zero Downtime Deployment with the CF Autopilot Plugin</h2></div></a></article><article class=has-image><a href=/post/control-home-devices-with-bluemix-internet-of-things-part-2/><div class=article-image><img src=/post/control-home-devices-with-bluemix-internet-of-things-part-2/robots-blog-post-header1.4ed429e6ecd463ab7c1e1bceeda4646e_hu_d6470bfc8f84ab3e.jpg width=250 height=150 loading=lazy alt="Featured image of post Control home devices with Bluemix Internet of Things (Part 2)" data-key=control-home-devices-with-bluemix-internet-of-things-part-2/ data-hash="md5-TtQp5uzUY6t8HhvO7aRkbg=="></div><div class=article-details><h2 class=article-title>Control home devices with Bluemix Internet of Things (Part 2)</h2></div></a></article><article><a href=/post/etherpad-in-cloud-foundry-quick-start-guide/><div class=article-details><h2 class=article-title>Etherpad in Cloud Foundry â€“ Quick Start Guide</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//jeffsloyerio.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 Jeff Sloyer</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>