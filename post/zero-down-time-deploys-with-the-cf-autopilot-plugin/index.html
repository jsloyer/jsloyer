<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Zero down time deployments are a must for any Internet app running at scale. Without the use of zero down time deployments, you would have to take down your application even just for a fraction of a second but in that fraction of a second you could lose a transaction or a purchase from a customer. This is not acceptable anymore. Some people like to call these apps cloud based apps, which I think is fine, but I‚Äôd rather call them Internet scale or born on the cloud apps. The companies who create these apps understand the apps‚Äôs need to stay up, because their app is their only lifeline and, hopefully, a source of income from the world.\n"><title>Zero Downtime Deployment with the CF Autopilot Plugin</title><link rel=canonical href=https://www.jeffsloyer.io/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="Zero Downtime Deployment with the CF Autopilot Plugin"><meta property='og:description' content="Zero down time deployments are a must for any Internet app running at scale. Without the use of zero down time deployments, you would have to take down your application even just for a fraction of a second but in that fraction of a second you could lose a transaction or a purchase from a customer. This is not acceptable anymore. Some people like to call these apps cloud based apps, which I think is fine, but I‚Äôd rather call them Internet scale or born on the cloud apps. The companies who create these apps understand the apps‚Äôs need to stay up, because their app is their only lifeline and, hopefully, a source of income from the world.\n"><meta property='og:url' content='https://www.jeffsloyer.io/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/'><meta property='og:site_name' content='Jeff Sloyer'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='bluemix'><meta property='article:tag' content='devops'><meta property='article:tag' content='zero downtime'><meta property='article:tag' content='cloudfoundry'><meta property='article:published_time' content='2015-06-19T10:41:59-05:00'><meta property='article:modified_time' content='2015-06-19T10:41:59-05:00'><meta property='og:image' content='https://www.jeffsloyer.io/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/unplug.jpg'><meta name=twitter:title content="Zero Downtime Deployment with the CF Autopilot Plugin"><meta name=twitter:description content="Zero down time deployments are a must for any Internet app running at scale. Without the use of zero down time deployments, you would have to take down your application even just for a fraction of a second but in that fraction of a second you could lose a transaction or a purchase from a customer. This is not acceptable anymore. Some people like to call these apps cloud based apps, which I think is fine, but I‚Äôd rather call them Internet scale or born on the cloud apps. The companies who create these apps understand the apps‚Äôs need to stay up, because their app is their only lifeline and, hopefully, a source of income from the world.\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.jeffsloyer.io/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/unplug.jpg'><link rel="shortcut icon" href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-1SGYYQEYE5"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1SGYYQEYE5")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/airplane_hu_b02b01ef7f6fbee8.png width=300 height=225 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>Jeff Sloyer</a></h1><h2 class=site-description>Thoughts on Tech and other interests...</h2></div></header><ol class=menu-social><li><a href=https://github.com/jsloyer target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/jeffsloyer/ target=_blank title="Linked In" rel=me><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></a></li><li><a href=https://twitter.com/jsloyer target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/speaking/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>Speaking</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ground-rules>Ground Rules‚Ä¶</a></li><li><a href=#importance-of-zero-down-time-deployments>Importance of Zero Down Time Deployments</a></li><li><a href=#how-does-it-work>How does it work?</a></li><li><a href=#autopilot-plugin>Autopilot plugin</a></li><li><a href=#extensions-with-ci-pipelines>Extensions with CI Pipelines</a></li><li><a href=#recap>Recap</a></li><li><a href=#video>Video</a></li><li><a href=#additional-parts>Additional part&rsquo;s</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/><img src=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/unplug_hu_4dd0881486424e0b.jpg srcset="/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/unplug_hu_4dd0881486424e0b.jpg 800w, /post/zero-down-time-deploys-with-the-cf-autopilot-plugin/unplug_hu_511b3e34ae8f6b09.jpg 1600w" width=800 height=311 loading=lazy alt="Featured image of post Zero Downtime Deployment with the CF Autopilot Plugin"></a></div><div class=article-details><header class=article-category><a href=/categories/sample-code/>Sample Code
</a><a href=/categories/video/>Video
</a><a href=/categories/tutorial/>Tutorial</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/>Zero Downtime Deployment with the CF Autopilot Plugin</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 19, 2015</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>7 minute read</time></div></footer></div></header><section class=article-content><p>Zero down time deployments are a must for any Internet app running at scale. ¬†Without the use of zero down time deployments, you would have to take down your application even just for a fraction of a second but in that fraction of a second you could lose a transaction or a purchase from a customer. ¬†This is not acceptable anymore. ¬†Some people like to call these apps cloud based apps, which I think is fine, but I‚Äôd rather call them Internet scale or born on the cloud apps. ¬†The companies who create these apps understand the apps‚Äôs need to stay up, because their app is their only lifeline and, hopefully, a source of income from the world.</p><p>Companies such as Facebook, Etsy, and Twitter have been using zero down time deployments for years. ¬†They thrive because they do multiple deployments to production a day. ¬†The number of deployments they do in one day is actually larger than most enterprise companies do in a full year. ¬†Part of the trick is that the code changes are small but they have employed strategies such as zero down time deployments to get code into production as fast as they can.</p><h2 id=ground-rules>Ground Rules‚Ä¶</h2><p>There are many names for this, zero down time deployments, obviously, but some people use the term blue/green, while others use the term red/back. ¬†They all mean the same thing. ¬†Instead of having a bias for colors in this post lets use the term ‚Äúzero down time‚Äù.</p><p>So what is it?</p><p>Zero Down time deployments are basically what they sound like. ¬†You update production without taking downtime. ¬†It‚Äôs not always that simple though. ¬†For the context of this post we are going to be talking about how to do zero down time deployments in Cloud Foundry.</p><p>Basically it‚Äôs a little trick to taking advantage of the way Cloud Foundry runs underneath the covers. ¬†Before we jump into it, there are a couple of caveats that we should discuss first. ¬†To successfully take advantage of zero down time deployments you should have followed the <a class=link href=http://12factor.net/ target=_blank rel=noopener>12 Factor App guidelines</a>. This will ensure that your app is horizontally scalable and can be deployed in a manner that will result in zero down time. ¬†Below are some highlights that you should abide by.</p><ol><li><p>Do not store sessions on disk or in memory. ¬†Store them in some type of shared database or file system. ¬†This could be your favorite database or an in memory database as well.</p></li><li><p>Do not store configuration information in your application or on disk. ¬†You should store your config info for your app in environment variables.</p></li><li><p>This is probably the most important, your application needs to be forward and backwards compatible with your database schema‚Ä¶ ¬†Say what? ¬†Yes, you need to trust your developers to manage the database schema from your code.If you are using a relational database, you will need some kind of framework to do database migrations for you. ¬†It‚Äôs not just that simple with relational databases though‚Ä¶ ¬†If you have a big database migration DO NOT PERORM MIGRATIONS THAT WILL INTERRUPT TRAFFIC! ¬†Perform them slowly over time where migrations do not impact users and traffic. ¬†Yahoo had a major application upgrade and it took them 6 months to do the migration to avoid impacting users and taking an outage. ¬†Remember we do not take outages‚Ä¶ ¬†If you are in NoSQL land, your life is easier. ¬†Just revision your API‚Äôs and educate your developers on forward and backwards data compatibility.</p></li></ol><h2 id=importance-of-zero-down-time-deployments>Importance of Zero Down Time Deployments</h2><p>So why are zero down time deployments so important? ¬†The answer is simple, to keep your website/app up so you can make money! ¬†Well that might be over-simplified a bit, but basically it all boils down to keeping your app up so you can continue to do what you do best, and hopefully that involves making money. ¬†If you look at Facebook, for example, they put code into production weeks and months before a feature is exposed to the public. ¬†They extensively test the features on employees first, then slowly enable the features to the rest of the world.</p><p>This is key, getting features in front of your customers and getting feedback from them. ¬†If it works that‚Äôs great, but if it doesn‚Äôt at least you know in a short time frame so you can remove it and pivot to go in a different direction. ¬†The current landscape is so fast paced that if you don‚Äôt get a feature out, your competition could beat you.</p><h2 id=how-does-it-work>How does it work?</h2><p>So let‚Äôs walk through what needs to happen to perform zero downtime deployments in Cloud Foundry. ¬†For the use of the walk-through, the application is currently taking traffic on <code>myapp.mybluemix.net</code>.</p><ol><li><p>Deploy your app or use a currently running app.
Currently your¬†application is taking traffic on <code>myapp.mybluemix.net</code>.
<a class=link href=zero-downtime-graphics.001.png><img src=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.001.png width=1024 height=768 srcset="/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.001_hu_67a6719a618981e5.png 480w, /post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.001_hu_9cf09c6100caf55a.png 1024w" loading=lazy alt="zero downtime graphics.001 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li><li><p>Deploy the new version of your app to <code>myapp-temp.mybluemix.net</code>.
At this time there is currently two versions of your app running. ¬†<code>myapp.mybluemix.net</code> is still taking production traffic.
The new app <code>myapp-temp.mybluemix.net</code> is separate, it can be pointed to your production API keys and databases at this point.
<a class=link href=zero-downtime-graphics.002.png><img src=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.002.png width=1024 height=768 srcset="/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.002_hu_eb1fe4ca1db1eba1.png 480w, /post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.002_hu_f8db8cd111c0f3e7.png 1024w" loading=lazy alt="zero downtime graphics.002 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li><li><p>Perform smoke tests on the new version of the application.
Some people say this step is optional, but to me its not. ¬†This is key to make sure there wasn‚Äôt any weird regressions or merge issues, they CAN happen‚Ä¶</p></li><li><p>Map production traffic to the new version of your app.
At this point the old version of your app and the new version are both taking production traffic.
<a class=link href=zero-downtime-graphics.003.png><img src=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.003.png width=1024 height=768 srcset="/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.003_hu_63c6b419a410167d.png 480w, /post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.003_hu_17ea991aa50404ca.png 1024w" loading=lazy alt="zero downtime graphics.003 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li><li><p>Unmap production traffic from the old version of the app. ¬†You can optionally delete the old version as well.
At this point the new version becomes production and ONLY it is taking traffic.
The new version still has two URL‚Äôs though, <code>myapp.mybluemix.net</code> and <code>myapp-temp.mybluemix.net</code>.
<a class=link href=zero-downtime-graphics.004.png><img src=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.004.png width=1024 height=768 srcset="/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.004_hu_19326b037542fa88.png 480w, /post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.004_hu_49e08d9f24a6dbc1.png 1024w" loading=lazy alt="zero downtime graphics.004 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li><li><p>Remove the temporary route <code>myapp-temp.mybluemix.net</code> from the new version of your app.
<a class=link href=zero-downtime-graphics.005.png><img src=/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.005.png width=1024 height=768 srcset="/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.005_hu_679aa03b0584be84.png 480w, /post/zero-down-time-deploys-with-the-cf-autopilot-plugin/zero-downtime-graphics.005_hu_669e628ff6813144.png 1024w" loading=lazy alt="zero downtime graphics.005 Zero Down Time Deploys with the CF Autopilot Plugin" class=gallery-image data-flex-grow=133 data-flex-basis=320px></a></p></li></ol><p>While this can be scripted there really isn‚Äôt a need to do that, there is a Cloud Foundry CLI plugin to do this.</p><h2 id=autopilot-plugin>Autopilot plugin</h2><p>Recently the Cloud Foundry CLI started supporting plugins. ¬†This is the holy grail for CF and you can start doing some fun stuff. ¬†In this case, the fun stuff is automating the complex, possibly human error-prone, steps above. ¬†As a dev, if I can automate something and reduce the chance of something going wrong, I am all in. ¬†If you do this, your IT/operations department will love you.</p><p><a class=link href=https://github.com/concourse/autopilot target=_blank rel=noopener>The plugin</a> performs the above steps for you for performing the zero downtime deployment.</p><ol><li><p>Ensure you have a <a class=link href="http://bluemix.net/?cm_mmc=Display-JeffSloyer.io-_-BluemixSampleApp-AutoPilotPlugin-_-Node-WatsonPersonalityInsights-_-BM-DevAd" target=_blank rel=noopener>Bluemix</a> account, if you do not sign up <a class=link href="http://bluemix.net/?cm_mmc=Display-JeffSloyer.io-_-BluemixSampleApp-AutoPilotPlugin-_-Node-WatsonPersonalityInsights-_-BM-DevAd" target=_blank rel=noopener>Bluemix</a>.</p></li><li><p>Install dependencies.</p></li></ol><pre><code>1. Golang installed ([instructions](https://golang.org/doc/install))


2. Version 6.7.0 or greater of the Cloud Foundry CLI
To check what version you have running, run¬†`cf -v` in your terminal.


        [01:36 PM] jsloyer@jeffs-mbp-2 [~]&gt;cf -v
        cf version 6.8.0-b15c536-2014-12-10T23:34:29+00:00


To upgrade go [here](https://github.com/cloudfoundry/cli/releases).
</code></pre><ol start=3><li><p>Ensure you have an app running/already deployed. ¬†The plugin requires that you have an app already deployed.</p></li><li><p>Run the following. ¬†I will describe what each line is doing.</p><p>go get github.com/concourse/autopilot
cf install-plugin $GOPATH/bin/autopilot
cf login -a ${CF_API} -u ${CF_USERNAME} -p ${CF_PASSWORD} -o ${CF_ORG} -s ${CF_SPACE}
cf zero-downtime-push myapp -f manifest.yml</p></li></ol><pre><code>Line 1 fetches the source code for the plugin.
Line 2 installs the plugin
Line 3 logins into Bluemix. ¬†I have the sensitive information replace with environment variables.
Line 4 performs the zero down time deployment.
</code></pre><p>The plugin does require a <code>manifest.yml</code>. ¬†The plugin basically views the <code>manifest.yml</code> files as the truth of the state of the application.</p><h2 id=extensions-with-ci-pipelines>Extensions with CI Pipelines</h2><p>This will be forthcoming in an upcoming blog post on how to use some of the most popular CI engines out there.</p><h2 id=recap>Recap</h2><p>Just to review what we did here, we learned what zero down time deployments are, why they are crucial to any Internet scale application, and how to perform a zero down time deployment. ¬†Then, we took it a step further on how to use a Cloud Foundry plugin to do the heavy lifting for us and automate the zero down time deployment.</p><p>I would love to hear your feedback and any suggestions you have, please reach out to me on Twitter [@jsloyer](<a class=link href=https://twitter.com/jsloyer target=_blank rel=noopener>https://twitter.com/jsloyer</a> target=)</p><h2 id=video>Video</h2><p>I have also published a video if you prefer to watch that instead, please check out¬†<a class=link href=/post/zero-downtime-deployment-with-the-cf-autopilot-plugin-video/>Zero Downtime Deployment with the CF Autopilot Plugin ‚Äì Video.</a></p><h2 id=additional-parts>Additional part&rsquo;s</h2><ul><li><a class=link href=/post/zero-downtime-deployments-with-bluemix-and-codeship/>Zero downtime deployments with Bluemix and Codeship</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/bluemix/>Bluemix</a>
<a href=/tags/devops/>Devops</a>
<a href=/tags/zero-downtime/>Zero Downtime</a>
<a href=/tags/cloudfoundry/>Cloudfoundry</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/post/etherpad-in-cloud-foundry-quick-start-guide/><div class=article-details><h2 class=article-title>Etherpad in Cloud Foundry ‚Äì Quick Start Guide</h2></div></a></article><article class=has-image><a href=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/><div class=article-image><img src=/post/iot-python-app-with-a-raspberry-pi-and-bluemix/iot-pi.45bcac68635bd88d3e1493389914926c_hu_898e6858bf6a597e.jpg width=250 height=150 loading=lazy alt="Featured image of post IoT Python app with a Raspberry Pi and Bluemix" data-key=iot-python-app-with-a-raspberry-pi-and-bluemix/ data-hash="md5-RbysaGNb2I0+FJM4mRSSbA=="></div><div class=article-details><h2 class=article-title>IoT Python app with a Raspberry Pi and Bluemix</h2></div></a></article><article class=has-image><a href=/post/simple-hello-world-python-app-using-flask/><div class=article-image><img src=/post/simple-hello-world-python-app-using-flask/helloworld.5adede0999e4f3f6fc03eefcd882b848_hu_de0b7aa9d7f94b3c.png width=250 height=150 loading=lazy alt="Featured image of post Simple Hello World Python App using Flask" data-key=simple-hello-world-python-app-using-flask/ data-hash="md5-Wt7eCZnk8/b8A+782IK4SA=="></div><div class=article-details><h2 class=article-title>Simple Hello World Python App using Flask</h2></div></a></article><article class=has-image><a href=/post/control-home-devices-with-bluemix-internet-of-things/><div class=article-image><img src=/post/control-home-devices-with-bluemix-internet-of-things/robots-blog-post-header1.4ed429e6ecd463ab7c1e1bceeda4646e_hu_d6470bfc8f84ab3e.jpg width=250 height=150 loading=lazy alt="Featured image of post Control home devices with Bluemix Internet of Things" data-key=control-home-devices-with-bluemix-internet-of-things/ data-hash="md5-TtQp5uzUY6t8HhvO7aRkbg=="></div><div class=article-details><h2 class=article-title>Control home devices with Bluemix Internet of Things</h2></div></a></article><article class=has-image><a href=/post/building-a-java-ee-app-on-ibm-bluemix-using-watson-and-cloudant/><div class=article-image><img src=/post/building-a-java-ee-app-on-ibm-bluemix-using-watson-and-cloudant/hiring.2e695e8973553794972a5d7a3d5949ee_hu_9ab30143c130cdbd.png width=250 height=150 loading=lazy alt="Featured image of post Building a Java EE app on IBM Bluemix Using Watson, Cloudant" data-key=building-a-java-ee-app-on-ibm-bluemix-using-watson-and-cloudant/ data-hash="md5-LmleiXNVN5SXKl16PVlJ7g=="></div><div class=article-details><h2 class=article-title>Building a Java EE app on IBM Bluemix Using Watson, Cloudant</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//jeffsloyerio.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 Jeff Sloyer</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>